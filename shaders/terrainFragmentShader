#version 400 core

in vec4 passColor;
in vec3 passNormal;
in vec2 passTextureCoords;

out vec4 outColor;

uniform sampler2D grassSampler;
uniform sampler2D slopeSampler;
uniform sampler2D rockSampler;
uniform sampler2D baseSampler;

void main(void) {
	float slope = 1f - passNormal.y;
	vec4 grassColor = texture(grassSampler, passTextureCoords);
	vec4 slopeColor = texture(slopeSampler, passTextureCoords);
	vec4 rockColor = texture(rockSampler, passTextureCoords);
	vec4 baseColor = texture(baseSampler, passTextureCoords);

	if (slope < 0.2f) {
		outColor = mix(grassColor, slopeColor, slope / 0.2f);
	} else if (slope < 0.7f) {
		outColor = mix(slopeColor, rockColor, (slope - 0.2f) / 0.5f);
	} else if (slope < 1.5f) {
		outColor = mix(rockColor, baseColor, (slope - 0.7f) / 0.8f);
	} else {
		outColor = baseColor;
	}
}